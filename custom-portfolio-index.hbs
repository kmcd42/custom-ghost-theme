{{!< default}}
{{!--
Template Name: Portfolio Index
Description: A stunning portfolio gallery with asymmetric grid, hover effects, and multiple layout options
--}}

{{#post}}
<article class="portfolio-index-page {{post_class}}">

    {{!-- Page Header --}}
    <header class="portfolio-index-header">
        <h1 class="portfolio-index-title">{{title}}</h1>
        {{#if custom_excerpt}}
            <p class="portfolio-index-description">{{custom_excerpt}}</p>
        {{/if}}
    </header>

    {{!-- Portfolio Grid --}}
    <div class="portfolio-grid" role="list">
        {{!-- Get all posts tagged with "portfolio" --}}
        {{#get "posts" filter="tag:portfolio" limit="all" include="tags"}}
            {{#foreach posts}}
                <article class="portfolio-grid-item" role="listitem">
                    <a href="{{url}}" class="portfolio-grid-link" aria-label="View project: {{title}}">
                        {{#if feature_image}}
                            <div class="portfolio-grid-image">
                                <img
                                    srcset="{{img_url feature_image size="s"}} 300w,
                                            {{img_url feature_image size="m"}} 720w,
                                            {{img_url feature_image size="l"}} 1200w"
                                    sizes="(max-width: 600px) 100vw, (max-width: 1024px) 50vw, 33vw"
                                    src="{{img_url feature_image size="l"}}"
                                    alt="{{#if feature_image_alt}}{{feature_image_alt}}{{else}}{{title}}{{/if}}"
                                    loading="lazy"
                                />
                                {{!-- Hover overlay with title --}}
                                <div class="portfolio-grid-overlay">
                                    <h3 class="portfolio-grid-overlay-title">{{title}}</h3>
                                    {{#if primary_tag}}
                                        <span class="portfolio-grid-overlay-tag">{{primary_tag.name}}</span>
                                    {{/if}}
                                </div>
                            </div>
                        {{else}}
                            <div class="portfolio-grid-placeholder">
                                <span class="portfolio-grid-number">{{@number}}</span>
                            </div>
                        {{/if}}
                        <div class="portfolio-grid-content">
                            <h3 class="portfolio-grid-title">{{title}}</h3>
                            {{#if @custom.show_portfolio_excerpts}}
                                {{#if custom_excerpt}}
                                    <p class="portfolio-grid-excerpt">{{custom_excerpt}}</p>
                                {{/if}}
                            {{/if}}
                            {{#if tags}}
                                <div class="portfolio-grid-tags">
                                    {{#foreach tags limit="3"}}
                                        {{#unless internal}}
                                            <span class="portfolio-grid-tag">{{name}}</span>
                                        {{/unless}}
                                    {{/foreach}}
                                </div>
                            {{/if}}
                        </div>
                    </a>
                </article>
            {{/foreach}}
        {{/get}}
    </div>

    {{!-- Empty state --}}
    {{#get "posts" filter="tag:portfolio" limit="1"}}
        {{#unless posts}}
            <div class="portfolio-index-empty">
                <p>No portfolio projects yet. Tag posts with "portfolio" to display them here.</p>
            </div>
        {{/unless}}
    {{/get}}

    {{!-- Optional page content below grid --}}
    {{#if content}}
        <div class="portfolio-index-content gh-content">
            {{content}}
        </div>
    {{/if}}

</article>
{{/post}}
